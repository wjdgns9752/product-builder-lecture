<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>소음 모니터</title>
  <link href='/style.css' rel='stylesheet'>
</head>
<body>
  <div class="container">
    <h1>소음 모니터</h1>
    
    <div class="controls">
      <button id="init-btn">모니터링 활성화 (클릭하여 시작)</button>
    </div>

    <div class="status-panel">
      <div id="status-text">상태: 대기 중</div>
      
      <div class="info-text">
        현재 소음: <span id="current-vol">0</span>% / 배경 소음: <span id="bg-vol">0</span>%
      </div>

      <div class="meter-container">
        <div id="bg-marker"></div>
        <div id="meter-bar"></div>
      </div>

      <!-- Duration Warning Bar -->
      <div class="duration-container">
        <div class="duration-label">지속 시간 경고</div>
        <div class="duration-track">
          <div id="duration-bar"></div>
        </div>
      </div>
      
    </div>

    <canvas id="visualizer" width="600" height="150"></canvas>

    <div class="settings">
      <label for="threshold">민감도 설정 (배경 대비 증가율): <span id="threshold-val">50</span>%</label>
      <input type="range" id="threshold" min="10" max="200" value="50">
      <p class="desc">
        설정된 소음이 <strong>2초 이상 지속</strong>되어야 평가창이 뜹니다.
      </p>
      
      <div class="options">
        <label>
          <input type="checkbox" id="audio-alarm"> 소리 알람 켜기
        </label>
      </div>
    </div>
  </div>

  <!-- Evaluation Modal -->
  <div id="evaluation-modal" class="modal hidden">
    <div class="modal-content">
      <h2>소음 평가</h2>
      <p>지속적인 소음이 감지되었습니다.<br>불쾌감을 0-10점으로 평가해주세요.</p>
      
      <div class="rating-scale">
        <button class="rate-btn" data-val="0">0</button>
        <button class="rate-btn" data-val="1">1</button>
        <button class="rate-btn" data-val="2">2</button>
        <button class="rate-btn" data-val="3">3</button>
        <button class="rate-btn" data-val="4">4</button>
        <button class="rate-btn" data-val="5">5</button>
        <button class="rate-btn" data-val="6">6</button>
        <button class="rate-btn" data-val="7">7</button>
        <button class="rate-btn" data-val="8">8</button>
        <button class="rate-btn" data-val="9">9</button>
        <button class="rate-btn" data-val="10">10</button>
      </div>

      <div class="selected-rating">
        선택됨: <span id="selected-val">-</span>점
      </div>
      
      <button id="submit-eval" disabled>평가 제출 및 다시 시작</button>
    </div>
  </div>
  
  <button id="theme-toggle" class="theme-btn">테마 변경</button>
  <script defer type="text/javascript" src="/main.js"></script>
</body>
</html>