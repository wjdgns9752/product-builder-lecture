<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="웹에서 바로 사용하는 실시간 환경 소음 측정기 (층간소음, 항공기, 도로, 철도). 데시벨(dB) 측정, 소음 기록 저장, 분야별 법적 기준 정보를 제공합니다. 별도의 설치 없이 마이크로 간편하게 측정하세요.">
    <meta name="keywords" content="소음 측정기, 층간소음, 항공기 소음, 도로교통 소음, 철도 소음, 데시벨 측정, 소음 기준">
    <meta property="og:title" content="스마트 환경 소음 모니터 - 실시간 데시벨 측정">
    <meta property="og:description" content="설치 없는 무료 소음 측정기. 층간소음, 항공기, 교통 소음 기록 및 분석 기능을 제공합니다.">
    <meta property="og:type" content="website">
    
    <title>스마트 환경 소음 모니터 (층간/항공/도로/철도) | 실시간 dB 측정</title>
    
    <link rel="stylesheet" href="style.css?v=6">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🔊</text></svg>">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4494575673591119"
     crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">🔊 Environmental Noise Monitor</div>
        </div>
    </header>

    <main class="container">
        <!-- Main Tool Section -->
        <section class="tool-section">
            <h1>실시간 환경 소음 모니터링</h1>
            <p class="subtitle">마이크를 통해 층간소음, 항공기, 도로, 철도 소음을 측정하고 기준을 확인하세요.</p>
            
            <canvas id="visualizer" width="600" height="100"></canvas>
            
            <!-- Noise Classification UI -->
            <div class="classifier-container">
                <h3>🔍 소음원 분석 (실시간)</h3>
                <div class="class-grid">
                    <div class="class-card" id="type-floor">
                        <div class="icon">👣</div>
                        <div class="label">층간소음</div>
                        <div class="sub">저주파/충격</div>
                    </div>
                    <div class="class-card" id="type-home">
                        <div class="icon">🏠</div>
                        <div class="label">생활소음</div>
                        <div class="sub">대화/TV</div>
                    </div>
                    <div class="class-card" id="type-road">
                        <div class="icon">🚗</div>
                        <div class="label">도로교통</div>
                        <div class="sub">지속음</div>
                    </div>
                    <div class="class-card" id="type-train">
                        <div class="icon">🚆</div>
                        <div class="label">철도/지하철</div>
                        <div class="sub">진동/마찰</div>
                    </div>
                    <div class="class-card" id="type-air">
                        <div class="icon">✈️</div>
                        <div class="label">항공기</div>
                        <div class="sub">상공 통과</div>
                    </div>
                </div>
                <p class="algo-note">* 주파수 대역 분석 기반 추정값입니다. (AI 정밀 분석 아님)</p>
            </div>
            
            <div class="status-panel">
                <h2 id="status-text">상태: 대기 중</h2>
                
                <div class="info-text">
                    <span>현재 소음: <span id="current-vol">0</span> dB (상대값)</span>
                    <span>배경 소음: <span id="bg-vol">0</span></span>
                </div>
                
                <div class="meter-container">
                    <div id="bg-marker"></div>
                    <div id="meter-bar"></div>
                </div>

                <div class="duration-container">
                    <div class="duration-label">지속 시간 감지</div>
                    <div class="duration-track">
                        <div id="duration-bar"></div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button id="init-btn" class="primary-btn">모니터링 시작</button>
            </div>

            <div class="settings">
                <h3>설정 (Sensitivity)</h3>
                <div class="desc">알림 임계값 조절 (배경 소음 대비 민감도)</div>
                <div class="slider-wrapper">
                    <input type="range" id="threshold" min="10" max="100" value="50">
                    <span id="threshold-val">50</span>%
                </div>
                
            <br>
            <button id="calibration-btn" class="secondary-btn">🎙️ 마이크 보정 (Calibration)</button>
            <br>
            <label>
                <input type="checkbox" id="audio-alarm" checked>
                알림음 켜기
            </label>
        </div>

        <button id="theme-toggle" class="theme-btn">테마 변경</button>
    </section>

    <!-- ... (Previous Info Section) ... -->

    <!-- Calibration Modal -->
    <div id="calibration-modal" class="modal hidden">
        <div class="modal-content">
            <h2>마이크 보정</h2>
            <p class="desc">정확한 측정을 위해 기준점을 설정합니다.</p>
            
            <div class="calib-step">
                <span class="step-num">1</span>
                <p>핑크 노이즈를 재생하여 일정한 소음 환경을 만드세요.<br>(또는 조용한 방이라면 생략 가능)</p>
                <button id="play-noise-btn">🔊 핑크 노이즈 재생/중지</button>
            </div>

            <div class="calib-step">
                <span class="step-num">2</span>
                <p><strong>자동 보정 (권장)</strong></p>
                <p class="sub-desc">휴대폰 볼륨을 최대로 높인 후, 조용한 곳에 두고 아래 버튼을 누르세요. (약 5초 소요)</p>
                <button id="auto-calib-btn" class="primary-btn" style="width:100%">🚀 자동 보정 시작</button>
                
                <div class="calib-divider">
                    <span>또는 수동 입력</span>
                </div>

                <div class="input-group" style="justify-content: center;">
                    <input type="number" id="real-db-input" placeholder="예: 60" min="30" max="120">
                    <span>dB (소음계 측정값)</span>
                </div>
            </div>

            <div class="calib-step">
                <span class="step-num">3</span>
                <p>현재 웹 앱 측정값: <span id="current-raw-db">...</span> dBFS</p>
            </div>

            <div class="btn-group">
                <button id="cancel-calib" class="secondary-btn">취소</button>
                <button id="save-calib" class="primary-btn">보정값 저장</button>
            </div>
        </div>
    </div>

        <!-- Content Section for AdSense Quality -->
        <article class="info-section">
            <hr class="divider">
            
            <section class="content-block">
                <h2>층간소음과 데시벨(dB) 이해하기</h2>
                <p>
                    최근 공동주택 생활이 늘어나면서 층간소음 문제는 심각한 사회적 이슈가 되고 있습니다. 
                    이 웹 도구는 사용자의 마이크를 활용하여 현재 환경의 소음 변화를 시각화하고, 
                    갑작스러운 소음 발생을 감지하여 기록하는 데 도움을 줍니다.
                </p>
            </section>

            <section class="content-block">
                <h3>📢 소음의 크기별 예시 (dB)</h3>
                <ul class="db-list">
                    <li><strong>30dB:</strong> 속삭이는 소리, 심야의 교외</li>
                    <li><strong>40dB:</strong> 조용한 도서관, 주간의 주택가</li>
                    <li><strong>50dB:</strong> 조용한 사무실, 일반적인 빗소리</li>
                    <li><strong>60dB:</strong> 일상적인 대화 소리, 백화점 내부</li>
                    <li><strong>70dB:</strong> 시끄러운 사무실, 전화벨 소리</li>
                    <li><strong>80dB:</strong> 지하철 차내 소음, 진공청소기</li>
                    <li><strong>90dB 이상:</strong> 소음성 난청을 유발할 수 있는 수준</li>
                </ul>
                <p class="note">* 본 웹 앱의 측정값은 전문 장비가 아닌 기기 마이크를 사용하므로, 상대적인 참고용으로만 사용하시기 바랍니다.</p>
            </section>

            <section class="content-block">
                <h3>⚖️ 환경 소음별 관리 기준 (참고용)</h3>
                <p>소음의 종류에 따라 적용되는 법적 기준이 다릅니다. 아래 기준을 참고하여 현재 소음 수준을 확인해보세요.</p>
                
                <div class="standard-grid">
                    <div class="std-card">
                        <h4>🏠 층간소음</h4>
                        <p class="std-desc">공동주택 층간소음 규칙</p>
                        <ul>
                            <li><strong>주간:</strong> 39dB (1분 등가)</li>
                            <li><strong>야간:</strong> 34dB (1분 등가)</li>
                            <li><small>* 직접충격음 기준</small></li>
                        </ul>
                    </div>
                    <div class="std-card">
                        <h4>🚗 도로교통 소음</h4>
                        <p class="std-desc">소음·진동 관리법 (주거지역)</p>
                        <ul>
                            <li><strong>주간:</strong> 68dB 이하</li>
                            <li><strong>야간:</strong> 58dB 이하</li>
                            <li><small>* 도로변 주거지 기준</small></li>
                        </ul>
                    </div>
                    <div class="std-card">
                        <h4>🚆 철도 소음</h4>
                        <p class="std-desc">철도 소음 한도 (주거지역)</p>
                        <ul>
                            <li><strong>주간:</strong> 70dB 이하</li>
                            <li><strong>야간:</strong> 60dB 이하</li>
                        </ul>
                    </div>
                    <div class="std-card">
                        <h4>✈️ 항공기 소음</h4>
                        <p class="std-desc">공항 소음 방지법</p>
                        <ul>
                            <li><strong>피해 예상:</strong> 75 WECPNL↑</li>
                            <li><strong>대책 기준:</strong> 약 70~75dB</li>
                            <li><small>* 지역/공항별 상이</small></li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="content-block">
                <h3>💡 효과적인 소음 모니터링 방법</h3>
                <ol>
                    <li>조용한 상태에서 '모니터링 시작'을 눌러 배경 소음을 학습시킵니다.</li>
                    <li>소음이 발생했을 때 그래프가 급격히 상승하는지 확인합니다.</li>
                    <li>지속적인 소음이 감지되면 자동으로 평가 창이 뜹니다.</li>
                    <li>기록된 데이터를 통해 소음 빈도를 체크해보세요.</li>
                </ol>
            </section>
        </article>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; 2024 Noise Monitor. All rights reserved.</p>
            <div class="footer-links">
                <a href="#" onclick="alert('개인정보처리방침: 본 서비스는 사용자의 오디오 데이터를 서버로 전송하거나 저장하지 않습니다. 모든 오디오 처리는 사용자의 브라우저 내에서 실시간으로 이루어집니다. 평가 데이터(점수, 시간)만 통계 목적으로 익명 저장됩니다.')">개인정보처리방침</a>
                <a href="#">이용약관</a>
            </div>
            <p class="disclaimer">본 서비스는 법적 효력이 있는 측정 도구가 아닙니다. 정확한 측정은 전문 소음계(Sound Level Meter)를 사용하시기 바랍니다.</p>
        </div>
    </footer>

    <!-- Evaluation Modal -->
    <div id="evaluation-modal" class="modal hidden">
        <div class="modal-content">
            <h2>소음 평가 (EMA)</h2>
            <p>방금 발생한 소음이 얼마나 거슬렸나요?</p>
            
            <div class="survey-section">
                <label>1. 불쾌감 정도 (1-10)</label>
                <div class="rating-scale">
                    <button class="rate-btn" data-val="1">1</button>
                    <button class="rate-btn" data-val="2">2</button>
                    <button class="rate-btn" data-val="3">3</button>
                    <button class="rate-btn" data-val="4">4</button>
                    <button class="rate-btn" data-val="5">5</button>
                    <button class="rate-btn" data-val="6">6</button>
                    <button class="rate-btn" data-val="7">7</button>
                    <button class="rate-btn" data-val="8">8</button>
                    <button class="rate-btn" data-val="9">9</button>
                    <button class="rate-btn" data-val="10">10</button>
                </div>
                <div class="selected-rating">선택함: <span id="selected-val">-</span></div>
            </div>

            <div class="survey-section">
                <label>2. 현재 활동 (Activity)</label>
                <div class="chip-group" id="activity-chips">
                    <button class="chip" data-type="activity" data-val="working">일/학습</button>
                    <button class="chip" data-type="activity" data-val="relaxing">휴식</button>
                    <button class="chip" data-type="activity" data-val="sleeping">수면</button>
                    <button class="chip" data-type="activity" data-val="housework">가사</button>
                </div>
            </div>

            <div class="survey-section">
                <label>3. 소음원 추정 (Source)</label>
                <div class="chip-group" id="source-chips">
                    <button class="chip" data-type="source" data-val="footsteps">층간소음(발소리)</button>
                    <button class="chip" data-type="source" data-val="traffic">도로/차량</button>
                    <button class="chip" data-type="source" data-val="aircraft">항공기</button>
                    <button class="chip" data-type="source" data-val="train">철도/지하철</button>
                    <button class="chip" data-type="source" data-val="construction">공사소음</button>
                    <button class="chip" data-type="source" data-val="voice">사람/동물</button>
                </div>
            </div>

            <button id="submit-eval" disabled>제출 및 계속하기</button>
        </div>
    </div>

    <script type="module" src="main.js?v=7"></script>
</body>
</html>